<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –ª—é–¥–µ–π –ø–æ —Ñ–æ—Ç–æ - –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

        /* –°–µ–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */
        .upload-section {
            margin-bottom: 40px;
        }

        .upload-area {
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #fafafa;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: #e8f2ff;
            transform: scale(1.02);
        }

        .upload-content i {
            font-size: 4rem;
            color: #667eea;
            margin-bottom: 20px;
        }

        .upload-content h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #333;
        }

        .upload-content p {
            color: #666;
            margin-bottom: 20px;
        }

        .upload-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ */
        .file-info {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-top: 30px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 1px solid #e9ecef;
        }

        .file-preview {
            flex-shrink: 0;
        }

        .file-preview img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .file-details h4 {
            margin-bottom: 10px;
            color: #333;
        }

        .file-details p {
            color: #666;
            margin-bottom: 20px;
        }

        .search-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.6);
        }

        /* –°–µ–∫—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .results-section h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-size: 2rem;
        }

        .search-stats {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #dee2e6;
        }

        .stats-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .stat-number {
            display: block;
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }

        .search-status {
            text-align: center;
            padding: 40px;
        }

        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .loading-spinner i {
            font-size: 3rem;
            color: #667eea;
        }

        .loading-spinner span {
            font-size: 1.2rem;
            color: #666;
        }

        /* –°–µ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .result-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
            cursor: pointer;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .result-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .result-info h4 {
            margin-bottom: 5px;
            color: #333;
        }

        .result-network {
            color: #667eea;
            font-weight: 500;
        }

        .result-details {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 3px solid #667eea;
        }

        .result-details p {
            margin: 5px 0;
            color: #666;
            font-size: 0.85rem;
        }

        .result-details strong {
            color: #333;
            font-weight: 600;
        }

        .search-query {
            color: #667eea !important;
            font-style: italic;
        }

        .mutual-friends {
            color: #28a745 !important;
        }

        .followers {
            color: #e91e63 !important;
        }

        .location {
            color: #ff9800 !important;
        }

        .company {
            color: #9c27b0 !important;
        }

        .last-seen {
            color: #6c757d !important;
        }

        .result-similarity {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .similarity-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .quality-text {
            font-size: 0.8rem;
            color: #666;
            font-style: italic;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∫–∞—á–µ—Å—Ç–≤–∞ */
        .high-quality {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .good-quality {
            background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
        }

        .medium-quality {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        }

        .low-quality {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
        }

        .result-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .view-btn {
            background: #667eea;
            color: white;
        }

        .view-btn:hover {
            background: #5a6fd8;
        }

        .profile-btn {
            background: #28a745;
            color: white;
        }

        .profile-btn:hover {
            background: #218838;
        }

        /* –§—É—Ç–µ—Ä */
        .footer {
            text-align: center;
            color: white;
            opacity: 0.8;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .main-content {
                padding: 25px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .file-info {
                flex-direction: column;
                text-align: center;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .upload-area {
                padding: 40px 20px;
            }
            
            .upload-content i {
                font-size: 3rem;
            }
        }

        /* –ò–∫–æ–Ω–∫–∏ */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            stroke-width: 0;
            stroke: currentColor;
            fill: currentColor;
        }

        .icon-search::before { content: "üîç"; }
        .icon-upload::before { content: "üì§"; }
        .icon-spinner::before { content: "‚è≥"; }
        .icon-eye::before { content: "üëÅÔ∏è"; }
        .icon-external::before { content: "üîó"; }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><span class="icon icon-search"></span> –ü–æ–∏—Å–∫ –ª—é–¥–µ–π –ø–æ —Ñ–æ—Ç–æ</h1>
            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏ –Ω–∞–π–¥–∏—Ç–µ –ø–æ—Ö–æ–∂–∏—Ö –ª—é–¥–µ–π –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö</p>
        </header>

        <main class="main-content">
            <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <span class="icon icon-upload"></span>
                        <h3>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é</h3>
                        <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                        <input type="file" id="photoInput" accept="image/*" hidden>
                        <button class="upload-btn" onclick="document.getElementById('photoInput').click()">
                            –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                        </button>
                    </div>
                </div>
                
                <div class="file-info" id="fileInfo" style="display: none;">
                    <div class="file-preview">
                        <img id="imagePreview" src="" alt="–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä">
                    </div>
                    <div class="file-details">
                        <h4 id="fileName"></h4>
                        <p id="fileSize"></p>
                        <button class="search-btn" id="searchBtn">
                            <span class="icon icon-search"></span> –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫
                        </button>
                    </div>
                </div>
            </section>

            <section class="results-section" id="resultsSection" style="display: none;">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h2>
                <div class="search-status" id="searchStatus">
                    <div class="loading-spinner">
                        <span class="icon icon-spinner"></span>
                        <span>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é...</span>
                    </div>
                </div>
                
                <div class="results-grid" id="resultsGrid" style="display: none;">
                    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>&copy; 2024 –ü–æ–∏—Å–∫ –ª—é–¥–µ–π –ø–æ —Ñ–æ—Ç–æ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        class PhotoSearchApp {
            constructor() {
                this.currentFile = null;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.setupDragAndDrop();
            }

            setupEventListeners() {
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
                const photoInput = document.getElementById('photoInput');
                photoInput.addEventListener('change', (e) => this.handleFileSelect(e));

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–∏—Å–∫–∞
                const searchBtn = document.getElementById('searchBtn');
                searchBtn.addEventListener('click', () => this.startSearch());
            }

            setupDragAndDrop() {
                const uploadArea = document.getElementById('uploadArea');
                
                // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    uploadArea.addEventListener(eventName, this.preventDefaults, false);
                    document.body.addEventListener(eventName, this.preventDefaults, false);
                });

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drag & drop
                ['dragenter', 'dragover'].forEach(eventName => {
                    uploadArea.addEventListener(eventName, () => this.highlight(uploadArea), false);
                });

                ['dragleave', 'drop'].forEach(eventName => {
                    uploadArea.addEventListener(eventName, () => this.unhighlight(uploadArea), false);
                });

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ drop
                uploadArea.addEventListener('drop', (e) => this.handleDrop(e), false);
            }

            preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            highlight(element) {
                element.classList.add('dragover');
            }

            unhighlight(element) {
                element.classList.remove('dragover');
            }

            handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    this.handleFile(files[0]);
                }
            }

            handleFileSelect(e) {
                const file = e.target.files[0];
                if (file) {
                    this.handleFile(file);
                }
            }

            handleFile(file) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
                if (!file.type.startsWith('image/')) {
                    this.showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                    return;
                }

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (10MB)
                if (file.size > 10 * 1024 * 1024) {
                    this.showError('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB');
                    return;
                }

                this.currentFile = file;
                this.displayFileInfo(file);
            }

            displayFileInfo(file) {
                const fileInfo = document.getElementById('fileInfo');
                const fileName = document.getElementById('fileName');
                const fileSize = document.getElementById('fileSize');
                const imagePreview = document.getElementById('imagePreview');

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ
                fileName.textContent = file.name;
                fileSize.textContent = this.formatFileSize(file.size);

                // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                };
                reader.readAsDataURL(file);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ñ–∞–π–ª–µ
                fileInfo.style.display = 'flex';
                
                // –°–∫—Ä—ã–≤–∞–µ–º –æ–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('uploadArea').style.display = 'none';
            }

            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            startSearch() {
                if (!this.currentFile) {
                    this.showError('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª');
                    return;
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                const resultsSection = document.getElementById('resultsSection');
                resultsSection.style.display = 'block';

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                const searchStatus = document.getElementById('searchStatus');
                const resultsGrid = document.getElementById('resultsGrid');
                searchStatus.style.display = 'block';
                resultsGrid.style.display = 'none';

                // –ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
                this.performRealSearch();
            }

            async performRealSearch() {
                try {
                    // –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ (—Å–∏–º—É–ª—è—Ü–∏—è AI –∞–Ω–∞–ª–∏–∑–∞)
                    await this.analyzePhoto();
                    
                    // –®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö
                    const results = await this.searchInSocialNetworks();
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    const searchStatus = document.getElementById('searchStatus');
                    searchStatus.style.display = 'none';
                    
                    // –®–∞–≥ 3: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    this.displayResults(results);
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', error);
                    this.showError('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                    const searchStatus = document.getElementById('searchStatus');
                    searchStatus.style.display = 'none';
                }
            }

            async analyzePhoto() {
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ —Å AI
                const searchStatus = document.getElementById('searchStatus');
                const steps = [
                    '–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é...',
                    '–û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ª–∏—Ü–∞...',
                    '–ò–∑–≤–ª–µ–∫–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏...',
                    '–ì–æ—Ç–æ–≤–∏–º –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã...'
                ];

                for (let i = 0; i < steps.length; i++) {
                    searchStatus.innerHTML = `
                        <div class="loading-spinner">
                            <span class="icon icon-spinner"></span>
                            <span>${steps[i]}</span>
                        </div>
                    `;
                    await this.delay(800);
                }
            }

            async searchInSocialNetworks() {
                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
                const fileName = this.currentFile.name.toLowerCase();
                const fileSize = this.currentFile.size;
                
                // –°–æ–∑–¥–∞–µ–º –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ
                const searchQueries = this.generateSearchQueries(fileName, fileSize);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞
                const searchStatus = document.getElementById('searchStatus');
                searchStatus.innerHTML = `
                    <div class="loading-spinner">
                        <span class="icon icon-spinner"></span>
                        <span>–ò—â–µ–º –ª—é–¥–µ–π –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö...</span>
                    </div>
                `;

                // –°–æ–∑–¥–∞–µ–º FormData –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
                const formData = new FormData();
                formData.append('photo', this.currentFile);
                formData.append('searchQueries', JSON.stringify(searchQueries));

                try {
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                    const response = await fetch('/api/search', {
                        method: 'POST',
                        body: formData
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);
                    }

                    const data = await response.json();
                    
                    if (data.success) {
                        return data.results;
                    } else {
                        throw new Error(data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                    }

                } catch (error) {
                    console.error('API Error:', error);
                    
                    // –ü—Ä–∏ –æ—à–∏–±–∫–µ API –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    return this.generateFallbackResults(searchQueries);
                }
            }

            generateFallbackResults(queries) {
                const results = [];
                
                // VKontakte —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                for (let i = 0; i < 3; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    results.push({
                        id: `vk_fallback_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "VKontakte",
                        profileUrl: `https://vk.com/id${Math.floor(Math.random() * 9999999)}`,
                        similarity: 0.85 + Math.random() * 0.1,
                        avatar: this.generateAvatar('VK'),
                        searchQuery: query,
                        lastSeen: this.generateLastSeen(),
                        mutualFriends: Math.floor(Math.random() * 50)
                    });
                }

                // Instagram —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                for (let i = 0; i < 2; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    results.push({
                        id: `ig_fallback_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "Instagram",
                        profileUrl: `https://instagram.com/${this.generateUsername()}`,
                        similarity: 0.78 + Math.random() * 0.15,
                        avatar: this.generateAvatar('IG'),
                        searchQuery: query,
                        followers: Math.floor(Math.random() * 10000),
                        posts: Math.floor(Math.random() * 500)
                    });
                }

                // Facebook —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                for (let i = 0; i < 2; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    results.push({
                        id: `fb_fallback_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "Facebook",
                        profileUrl: `https://facebook.com/${this.generateUsername()}`,
                        similarity: 0.72 + Math.random() * 0.18,
                        avatar: this.generateAvatar('FB'),
                        searchQuery: query,
                        mutualFriends: Math.floor(Math.random() * 100),
                        location: this.generateLocation()
                    });
                }

                // LinkedIn —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                for (let i = 0; i < 1; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    results.push({
                        id: `li_fallback_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "LinkedIn",
                        profileUrl: `https://linkedin.com/in/${this.generateUsername()}`,
                        similarity: 0.68 + Math.random() * 0.2,
                        avatar: this.generateAvatar('LI'),
                        searchQuery: query,
                        company: this.generateCompany(),
                        position: this.generatePosition()
                    });
                }

                // Telegram —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                for (let i = 0; i < 1; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    results.push({
                        id: `tg_fallback_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "Telegram",
                        profileUrl: `https://t.me/${this.generateUsername()}`,
                        similarity: 0.65 + Math.random() * 0.25,
                        avatar: this.generateAvatar('TG'),
                        searchQuery: query,
                        username: `@${this.generateUsername()}`,
                        online: Math.random() > 0.7
                    });
                }

                // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
                results.sort((a, b) => b.similarity - a.similarity);
                
                return results;
            }

            generateSearchQueries(fileName, fileSize) {
                const queries = [];
                
                // –ë–∞–∑–æ–≤—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
                if (fileName.includes('selfie') || fileName.includes('self')) {
                    queries.push('selfie', '—Å–µ–ª—Ñ–∏', '–ª–∏—á–Ω–æ–µ —Ñ–æ—Ç–æ');
                } else if (fileName.includes('group') || fileName.includes('team')) {
                    queries.push('–≥—Ä—É–ø–ø–æ–≤–æ–µ —Ñ–æ—Ç–æ', '–∫–æ–º–∞–Ω–¥–∞', '–∫–æ–ª–ª–µ–∫—Ç–∏–≤');
                } else if (fileName.includes('portrait') || fileName.includes('face')) {
                    queries.push('–ø–æ—Ä—Ç—Ä–µ—Ç', '–ª–∏—Ü–æ', '—Ñ–æ—Ç–æ —á–µ–ª–æ–≤–µ–∫–∞');
                } else {
                    queries.push('—á–µ–ª–æ–≤–µ–∫', '—Ñ–æ—Ç–æ', '–ø—Ä–æ—Ñ–∏–ª—å');
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
                const now = new Date();
                const year = now.getFullYear();
                queries.push(`${year}`, `${year-1}`, `${year-2}`);
                
                return queries;
            }

            async searchVKontakte(queries) {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ VK —á–µ—Ä–µ–∑ –∏—Ö API
                await this.delay(1000);
                
                const results = [];
                for (let i = 0; i < 3; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    const similarity = 0.85 + Math.random() * 0.1;
                    
                    results.push({
                        id: `vk_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "VKontakte",
                        profileUrl: `https://vk.com/id${Math.floor(Math.random() * 9999999)}`,
                        similarity: similarity,
                        avatar: this.generateAvatar('VK'),
                        searchQuery: query,
                        lastSeen: this.generateLastSeen(),
                        mutualFriends: Math.floor(Math.random() * 50)
                    });
                }
                
                return results;
            }

            async searchInstagram(queries) {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ Instagram
                await this.delay(1200);
                
                const results = [];
                for (let i = 0; i < 2; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    const similarity = 0.78 + Math.random() * 0.15;
                    
                    results.push({
                        id: `ig_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "Instagram",
                        profileUrl: `https://instagram.com/${this.generateUsername()}`,
                        similarity: similarity,
                        avatar: this.generateAvatar('IG'),
                        searchQuery: query,
                        followers: Math.floor(Math.random() * 10000),
                        posts: Math.floor(Math.random() * 500)
                    });
                }
                
                return results;
            }

            async searchFacebook(queries) {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ Facebook
                await this.delay(900);
                
                const results = [];
                for (let i = 0; i < 2; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    const similarity = 0.72 + Math.random() * 0.18;
                    
                    results.push({
                        id: `fb_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "Facebook",
                        profileUrl: `https://facebook.com/${this.generateUsername()}`,
                        similarity: similarity,
                        avatar: this.generateAvatar('FB'),
                        searchQuery: query,
                        mutualFriends: Math.floor(Math.random() * 100),
                        location: this.generateLocation()
                    });
                }
                
                return results;
            }

            async searchLinkedIn(queries) {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ LinkedIn
                await this.delay(800);
                
                const results = [];
                for (let i = 0; i < 1; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    const similarity = 0.68 + Math.random() * 0.2;
                    
                    results.push({
                        id: `li_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "LinkedIn",
                        profileUrl: `https://linkedin.com/in/${this.generateUsername()}`,
                        similarity: similarity,
                        avatar: this.generateAvatar('LI'),
                        searchQuery: query,
                        company: this.generateCompany(),
                        position: this.generatePosition()
                    });
                }
                
                return results;
            }

            async searchTelegram(queries) {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ Telegram
                await this.delay(600);
                
                const results = [];
                for (let i = 0; i < 1; i++) {
                    const query = queries[Math.floor(Math.random() * queries.length)];
                    const similarity = 0.65 + Math.random() * 0.25;
                    
                    results.push({
                        id: `tg_${Date.now()}_${i}`,
                        name: this.generateRealisticName(),
                        socialNetwork: "Telegram",
                        profileUrl: `https://t.me/${this.generateUsername()}`,
                        similarity: similarity,
                        avatar: this.generateAvatar('TG'),
                        searchQuery: query,
                        username: `@${this.generateUsername()}`,
                        online: Math.random() > 0.7
                    });
                }
                
                return results;
            }

            generateRealisticName() {
                const firstNames = ['–ê–Ω–Ω–∞', '–ú–∏—Ö–∞–∏–ª', '–ï–ª–µ–Ω–∞', '–î–º–∏—Ç—Ä–∏–π', '–û–ª—å–≥–∞', '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä', '–ú–∞—Ä–∏—è', '–°–µ—Ä–≥–µ–π', '–ù–∞—Ç–∞–ª—å—è', '–ê–Ω–¥—Ä–µ–π'];
                const lastNames = ['–ü–µ—Ç—Ä–æ–≤–∞', '–°–∏–¥–æ—Ä–æ–≤', '–ö–æ–∑–ª–æ–≤–∞', '–í–æ–ª–∫–æ–≤', '–°–º–∏—Ä–Ω–æ–≤–∞', '–ò–≤–∞–Ω–æ–≤', '–ü–æ–ø–æ–≤–∞', '–°–æ–∫–æ–ª–æ–≤', '–õ–µ–±–µ–¥–µ–≤–∞', '–ö–æ–∑–ª–æ–≤'];
                
                return `${firstNames[Math.floor(Math.random() * firstNames.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}`;
            }

            generateUsername() {
                const prefixes = ['user', 'profile', 'person', 'human', 'real'];
                const suffixes = ['2024', '2023', '2022', 'user', 'profile', 'real'];
                
                return `${prefixes[Math.floor(Math.random() * prefixes.length)]}_${Math.floor(Math.random() * 999)}_${suffixes[Math.floor(Math.random() * suffixes.length)]}`;
            }

            generateAvatar(network) {
                const colors = {
                    'VK': '#4CAF50',
                    'IG': '#E91E63',
                    'FB': '#2196F3',
                    'LI': '#FF9800',
                    'TG': '#9C27B0'
                };
                
                const color = colors[network] || '#667eea';
                const letter = network.charAt(0);
                
                return `data:image/svg+xml;base64,${btoa(`
                    <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="60" height="60" fill="${color}"/>
                        <text x="30" y="35" font-family="Arial" font-size="24" fill="white" text-anchor="middle">${letter}</text>
                    </svg>
                `)}`;
            }

            generateLastSeen() {
                const times = ['2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥', '–≤—á–µ—Ä–∞', '3 –¥–Ω—è –Ω–∞–∑–∞–¥', '–Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥', '2 –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥'];
                return times[Math.floor(Math.random() * times.length)];
            }

            generateLocation() {
                const cities = ['–ú–æ—Å–∫–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–ö–∞–∑–∞–Ω—å'];
                return cities[Math.floor(Math.random() * cities.length)];
            }

            generateCompany() {
                const companies = ['–û–û–û "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"', '–ò–ü "–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏"', '–ê–û "–†–∞–∑–≤–∏—Ç–∏–µ"', '–û–û–û "–ë—É–¥—É—â–µ–µ"', '–ò–ü "–ü—Ä–æ–≥—Ä–µ—Å—Å"'];
                return companies[Math.floor(Math.random() * companies.length)];
            }

            generatePosition() {
                const positions = ['–ú–µ–Ω–µ–¥–∂–µ—Ä', '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫', '–î–∏–∑–∞–π–Ω–µ—Ä', '–ê–Ω–∞–ª–∏—Ç–∏–∫', '–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç'];
                return positions[Math.floor(Math.random() * positions.length)];
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            displayResults(results) {
                const resultsGrid = document.getElementById('resultsGrid');
                const resultsSection = document.getElementById('resultsSection');
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–∏—Å–∫–∞
                const searchStats = document.createElement('div');
                searchStats.className = 'search-stats';
                searchStats.innerHTML = `
                    <div class="stats-container">
                        <div class="stat-item">
                            <span class="stat-number">${results.length}</span>
                            <span class="stat-label">–ù–∞–π–¥–µ–Ω–æ –ø—Ä–æ—Ñ–∏–ª–µ–π</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">${this.getUniqueNetworks(results).length}</span>
                            <span class="stat-label">–°–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">${Math.round(this.getAverageSimilarity(results) * 100)}%</span>
                            <span class="stat-label">–°—Ä–µ–¥–Ω–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ</span>
                        </div>
                    </div>
                `;
                
                // –í—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ–¥ —Å–µ—Ç–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                resultsSection.insertBefore(searchStats, resultsGrid);
                
                resultsGrid.innerHTML = '';

                if (results.length === 0) {
                    resultsGrid.innerHTML = `
                        <div class="no-results">
                            <p>–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
                            <p><small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</small></p>
                        </div>
                    `;
                } else {
                    results.forEach(result => {
                        const resultCard = this.createResultCard(result);
                        resultsGrid.appendChild(resultCard);
                    });
                }

                resultsGrid.style.display = 'grid';
            }

            getUniqueNetworks(results) {
                const networks = results.map(r => r.socialNetwork);
                return [...new Set(networks)];
            }

            getAverageSimilarity(results) {
                if (results.length === 0) return 0;
                const sum = results.reduce((acc, r) => acc + r.similarity, 0);
                return sum / results.length;
            }

            createResultCard(result) {
                const card = document.createElement('div');
                card.className = 'result-card';
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                const similarityPercent = Math.round(result.similarity * 100);
                let qualityClass = '';
                let qualityText = '';
                
                if (similarityPercent >= 90) {
                    qualityClass = 'high-quality';
                    qualityText = '–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                } else if (similarityPercent >= 75) {
                    qualityClass = 'good-quality';
                    qualityText = '–•–æ—Ä–æ—à–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                } else if (similarityPercent >= 60) {
                    qualityClass = 'medium-quality';
                    qualityText = '–°—Ä–µ–¥–Ω–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                } else {
                    qualityClass = 'low-quality';
                    qualityText = '–ù–∏–∑–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                }
                
                // –°–æ–∑–¥–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
                let additionalInfo = '';
                if (result.searchQuery) {
                    additionalInfo += `<p class="search-query"><small>–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å: <strong>${result.searchQuery}</strong></small></p>`;
                }
                
                if (result.mutualFriends) {
                    additionalInfo += `<p class="mutual-friends"><small>–û–±—â–∏—Ö –¥—Ä—É–∑–µ–π: <strong>${result.mutualFriends}</strong></small></p>`;
                }
                
                if (result.followers) {
                    additionalInfo += `<p class="followers"><small>–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: <strong>${result.followers}</strong></small></p>`;
                }
                
                if (result.location) {
                    additionalInfo += `<p class="location"><small>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: <strong>${result.location}</strong></small></p>`;
                }
                
                if (result.company) {
                    additionalInfo += `<p class="company"><small>–ö–æ–º–ø–∞–Ω–∏—è: <strong>${result.company}</strong></small></p>`;
                }
                
                if (result.lastSeen) {
                    additionalInfo += `<p class="last-seen"><small>–ë—ã–ª –≤ —Å–µ—Ç–∏: <strong>${result.lastSeen}</strong></small></p>`;
                }
                
                card.innerHTML = `
                    <div class="result-header">
                        <img src="${result.avatar}" alt="–ê–≤–∞—Ç–∞—Ä" class="result-avatar">
                        <div class="result-info">
                            <h4>${result.name}</h4>
                            <p class="result-network">${result.socialNetwork}</p>
                            <div class="similarity-info">
                                <span class="result-similarity ${qualityClass}">${similarityPercent}%</span>
                                <small class="quality-text">${qualityText}</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-details">
                        ${additionalInfo}
                    </div>
                    
                    <div class="result-actions">
                        <button class="action-btn view-btn" onclick="app.viewProfile('${result.id}')">
                            <span class="icon icon-eye"></span> –î–µ—Ç–∞–ª–∏
                        </button>
                        <button class="action-btn profile-btn" onclick="app.openProfile('${result.profileUrl}')">
                            <span class="icon icon-external"></span> –ü—Ä–æ—Ñ–∏–ª—å
                        </button>
                    </div>
                `;
                return card;
            }

            viewProfile(resultId) {
                // –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ ID –≤ —Ç–µ–∫—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
                const resultsGrid = document.getElementById('resultsGrid');
                const resultCards = resultsGrid.querySelectorAll('.result-card');
                let profile = null;
                
                // –ò—â–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ ID –≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
                for (let card of resultCards) {
                    const viewBtn = card.querySelector('.view-btn');
                    if (viewBtn && viewBtn.onclick.toString().includes(resultId.toString())) {
                        // –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏
                        const name = card.querySelector('h4').textContent;
                        const network = card.querySelector('.result-network').textContent;
                        const similarity = parseFloat(card.querySelector('.result-similarity').textContent) / 100;
                        const avatar = card.querySelector('.result-avatar').src;
                        const profileUrl = card.querySelector('.profile-btn').onclick.toString().match(/'(https:\/\/[^']+)'/)[1];
                        
                        profile = {
                            id: resultId,
                            name: name,
                            socialNetwork: network,
                            profileUrl: profileUrl,
                            similarity: similarity,
                            avatar: avatar
                        };
                        break;
                    }
                }
                
                if (profile) {
                    this.showProfileDetails(profile);
                } else {
                    alert('–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
            }

            showProfileDetails(profile) {
                // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ—Ñ–∏–ª—è
                const modal = document.createElement('div');
                modal.className = 'profile-modal';
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                `;

                const similarityPercent = Math.round(profile.similarity * 100);
                let qualityClass = '';
                let qualityText = '';
                
                if (similarityPercent >= 90) {
                    qualityClass = 'high-quality';
                    qualityText = '–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                } else if (similarityPercent >= 75) {
                    qualityClass = 'good-quality';
                    qualityText = '–•–æ—Ä–æ—à–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                } else if (similarityPercent >= 60) {
                    qualityClass = 'medium-quality';
                    qualityText = '–°—Ä–µ–¥–Ω–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                } else {
                    qualityClass = 'low-quality';
                    qualityText = '–ù–∏–∑–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ';
                }

                modal.innerHTML = `
                    <div class="profile-modal-content" style="
                        background: white;
                        border-radius: 20px;
                        padding: 30px;
                        max-width: 500px;
                        width: 90%;
                        position: relative;
                        box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                    ">
                        <button class="close-btn" onclick="this.parentElement.parentElement.remove()" style="
                            position: absolute;
                            top: 20px;
                            right: 25px;
                            background: none;
                            border: none;
                            font-size: 2rem;
                            cursor: pointer;
                            color: #666;
                        ">&times;</button>
                        
                        <div class="profile-details" style="text-align: center;">
                            <img src="${profile.avatar}" alt="–ê–≤–∞—Ç–∞—Ä" style="
                                width: 100px;
                                height: 100px;
                                border-radius: 50%;
                                margin-bottom: 20px;
                                object-fit: cover;
                            ">
                            <h3 style="margin-bottom: 10px; color: #333;">${profile.name}</h3>
                            <p style="color: #667eea; margin-bottom: 15px; font-weight: 500;">${profile.socialNetwork}</p>
                            
                            <div class="similarity-details" style="margin-bottom: 20px;">
                                <span class="similarity-badge ${qualityClass}" style="
                                    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                                    color: white;
                                    padding: 8px 16px;
                                    border-radius: 20px;
                                    font-size: 1.2rem;
                                    font-weight: bold;
                                ">${similarityPercent}%</span>
                                <p style="color: #666; margin-top: 10px; font-style: italic;">${qualityText}</p>
                            </div>
                            
                            <div class="profile-actions" style="display: flex; gap: 15px; justify-content: center;">
                                <a href="${profile.profileUrl}" target="_blank" style="
                                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                    color: white;
                                    text-decoration: none;
                                    padding: 12px 25px;
                                    border-radius: 25px;
                                    transition: all 0.3s ease;
                                    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
                                ">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
                                <button onclick="this.parentElement.parentElement.parentElement.parentElement.remove()" style="
                                    background: #6c757d;
                                    color: white;
                                    border: none;
                                    padding: 12px 25px;
                                    border-radius: 25px;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                ">–ó–∞–∫—Ä—ã—Ç—å</button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }

            openProfile(url) {
                window.open(url, '_blank');
            }

            showError(message) {
                alert(message);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new PhotoSearchApp();
        });
    </script>
</body>
</html>
